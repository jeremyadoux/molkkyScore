app.controller("angular-gameBoard",["$scope","GameData","$rootScope",function($scope,GameData,$rootScope){function processNumberInTutorialModeScoped(a){switch($scope.tutorialData.step){case 1:6==a?($scope.manualTutorial=!0,$scope.nextStep()):$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=getTutorialHelpText($scope.tutorialData.step,$scope.language),$scope.$apply()}).fadeIn("fast",function(){setTutorialArrowsPosition(!0)});break;case 3:0==a?($("#td-0").toggleClass("active"),$("#td-player-name").toggleClass("active")):$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=getTutorialHelpText($scope.tutorialData.step,$scope.language),$scope.$apply()}).fadeIn("fast",function(){setTutorialArrowsPosition(!0)});break;default:$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=getTutorialHelpText($scope.tutorialData.step,$scope.language),$scope.$apply()}).fadeIn("fast",function(){setTutorialArrowsPosition(!0)})}}function optionsInTutorialModeScoped(){switch($scope.tutorialData.step){case 5:$scope.manualTutorial=!0,$scope.nextStep();break;default:animateOptionsIcon(),$rootScope.$broadcast("initializeOptions")}}function processThrowTutorialScoped(){switch($scope.tutorialData.step){case 2:$scope.nextStep();break;case 3:$("#td-0").hasClass("active")?($scope.manualTutorial=!0,$scope.nextStep()):$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=getTutorialHelpText($scope.tutorialData.step,$scope.language),$scope.$apply()}).fadeIn("fast",function(){setTutorialArrowsPosition(!0)});break;default:$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=getTutorialHelpText($scope.tutorialData.step,$scope.language),$scope.$apply()}).fadeIn("fast",function(){setTutorialArrowsPosition(!0)})}}function showScoreboardInTutorialModeScoped(){switch($scope.tutorialData.step){case 4:$rootScope.$broadcast("initializeScoreboard"),$scope.manualTutorial=!0,$scope.nextStep();break;default:$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=getTutorialHelpText($scope.tutorialData.step,$scope.language),$scope.$apply()}).fadeIn("fast",function(){setTutorialArrowsPosition(!0)})}}function processThrowBosklappersScoped(){if($("#mainTable #td-player-name").hasClass("active")){var a=-1;if($("#mainTable .td-score-number.active")[0]&&(a=parseInt($("#mainTable .td-score-number.active").text())),0==a?processMissBosklappers($scope.activePlayer):(processScoreBosklappers($scope.activePlayer,a),$scope.activePlayer.outOfTheGame&&(GameData.setRanking($scope.activePlayer),$scope.activePlayer.winner&&(setIsRestoreGame(!1),clearLocalStorageGameData(),$rootScope.$broadcast("initializeScoreboard")))),$scope.activePlayer.myTurn=!1,GameData.stillPlayersInTheGame()){var b=GameData.getNextInGamePlayer($scope.activePlayer.index);b.myTurn=!0,b.index<=$scope.activePlayer.index&&$scope.data.throwNumber++,$scope.activePlayer=b}else $rootScope.$broadcast("initializeScoreboard");$("#mainTable #td-player-name").removeClass("active"),$("#mainTable .td-score-number.active").removeClass("active"),$("#mainTable .td-score-number.active").removeClass("active"),$("#mainTable #td-0.billyHalf").removeClass("billyHalf").text("0"),$("#mainTable #td-0.billySuper").removeClass("billySuper").text("0")}}$scope.toggleNumber=function(a){return $scope.tutorial&&!$scope.tutorialInProcess?void processNumberInTutorialModeScoped(a):(GameData.getBosklappersMode()?0==a?setBillyChar():toggleNumberActivationBosklappers(a):toggleNumberActivation(a),GameData.gameHasStarted()||0!=a||GameData.getBosklappersMode()||checkBosklappersActivationCount(!1)&&(GameData.setBosklappersMode(!0),$("#td-0").removeClass("active"),$("#td-player-name").removeClass("active"),$rootScope.$broadcast("initializeBosklappers")),void(0!=a&&checkBosklappersActivationCount(!0)))},$scope.options=function(){return $scope.tutorial&&!$scope.tutorialInProcess?void optionsInTutorialModeScoped():(checkBosklappersActivationCount(!0),animateOptionsIcon(),void $rootScope.$broadcast("initializeOptions"))},$scope.showScoreboard=function(){return $scope.tutorial&&!$scope.tutorialInProcess?void showScoreboardInTutorialModeScoped():(checkBosklappersActivationCount(!0),void $rootScope.$broadcast("initializeScoreboard"))},$scope.processThrow=function(){if($scope.tutorial&&!$scope.tutorialInProcess)return void processThrowTutorialScoped();if(checkBosklappersActivationCount(!0),GameData.getBosklappersMode())processThrowBosklappersScoped();else if($("#mainTable #td-player-name").hasClass("active")){var a=parseInt($("#mainTable .td-score-number.active").text());if(0==a?processMiss($scope.activePlayer):(processScore($scope.activePlayer,a),$scope.activePlayer.outOfTheGame&&(GameData.setRanking($scope.activePlayer),$scope.activePlayer.winner&&(setIsRestoreGame(!1),$rootScope.$broadcast("initializeScoreboard")))),$scope.activePlayer.myTurn=!1,GameData.stillPlayersInTheGame()){var b=GameData.getNextInGamePlayer($scope.activePlayer.index);b.myTurn=!0,b.index<=$scope.activePlayer.index&&$scope.data.throwNumber++,$scope.activePlayer=b}else $rootScope.$broadcast("initializeScoreboard");$("#mainTable #td-player-name").removeClass("active"),$("#mainTable .td-score-number.active").removeClass("active")}GameData.gameHasWinner()||$scope.tutorial||writeGameDataToLocalStorage($scope.players,$scope.data)},$scope.nextStep=function(){if(!$scope.tutorialInProcess)switch($scope.tutorialInProcess=!0,$scope.tutorialData.step){case 1:$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=eval("tutorial."+$scope.language+".steps.two"),$scope.toggleNumber(6),$scope.tutorialInProcess=!1,$scope.tutorialData.step++,$scope.$apply(),$(".tutorial__content p").fadeIn("fast",function(){setTutorialArrowsPosition(!0)})});break;case 2:$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=eval("tutorial."+$scope.language+".steps.three"),$scope.processThrow(),$scope.tutorialInProcess=!1,$scope.tutorialData.step++,$scope.$apply(),$(".tutorial__content p").fadeIn("fast",function(){setTutorialArrowsPosition(!0)})});break;case 3:$("#td-0").hasClass("active")||($("#td-0").addClass("active"),$("#td-player-name").addClass("active")),$scope.manualTutorial?($scope.processThrow(),$scope.tutorialInProcess=!1,$scope.manualTutorial=!1,$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=eval("tutorial."+$scope.language+".steps.four"),$scope.tutorialData.step++,$scope.$apply()}).fadeIn("fast",function(){setTutorialArrowsPosition(!0)})):setTimeout(function(){$scope.processThrow(),$scope.tutorialInProcess=!1,$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=eval("tutorial."+$scope.language+".steps.four"),$scope.tutorialData.step++,$scope.$apply()}).fadeIn("fast",function(){setTutorialArrowsPosition(!0)})},1e3);break;case 4:$scope.showScoreboard();var checkScoreboardOpen=setInterval(function(){$("#modalScoreboard").hasClass("in")||(clearInterval(checkScoreboardOpen),$scope.manualTutorial=!1,$scope.tutorialInProcess=!1,$(".tutorial__content p").fadeOut("fast",function(){$scope.stepText=eval("tutorial."+$scope.language+".steps.five"),$scope.tutorialData.step++,$scope.$apply()}).fadeIn("fast",function(){setTutorialArrowsPosition(!0)}))},500);break;case 5:GameData.setTutorialStepFive(!0),$scope.options();var checkOptionsOpen=setInterval(function(){$("#modalOptions").hasClass("in")||(clearInterval(checkOptionsOpen),$scope.tutorialInProcess=!1,$scope.manualTutorial=!1,$(".tutorial__content p").fadeOut("fast",function(){0==$scope.players[1].misses?($scope.stepText=eval("tutorial."+$scope.language+".steps.six"),$scope.tutorialData.step++,GameData.setTutorialStepFive(!1)):$scope.stepText=getTutorialHelpText($scope.tutorialData.step,$scope.language),$scope.$apply()}).fadeIn("fast",function(){setTutorialArrowsPosition(!0)}))},500)}},$scope.prevStep=function(){$scope.tutorialInProcess||($scope.tutorialInProcess=!0,$(".tutorial__content p").fadeOut("fast",function(){switch($scope.tutorialData.step){case 2:$scope.stepText=eval("tutorial."+$scope.language+".steps.one"),$(".td-score-number").removeClass("active"),$("#td-player-name").removeClass("active");break;case 3:$scope.stepText=eval("tutorial."+$scope.language+".steps.two"),$("#modalOptions #btn-undo-options").click(),$(".td-score-number").removeClass("active"),$("#td-player-name").removeClass("active").addClass("active"),$("#td-6").addClass("active");break;case 4:$scope.stepText=eval("tutorial."+$scope.language+".steps.three"),$("#modalOptions #btn-undo-options").click();break;case 5:$scope.stepText=eval("tutorial."+$scope.language+".steps.four");break;case 6:$scope.stepText=eval("tutorial."+$scope.language+".steps.five"),$("#td-0").click(),$("#td-player-name").click()}$scope.tutorialData.step--,$scope.tutorialInProcess=!1,$scope.$apply(),$(".tutorial__content p").fadeIn("fast",function(){setTutorialArrowsPosition(!0)})}))},$scope.$on("initializeGameBoard",function(){GameData.setTutorial(!1),$scope.tutorial=!1,$scope.players=GameData.getPlayers(),$scope.players[0].myTurn=!0,$scope.activePlayer=$scope.players[0],GameData.resetThrowNumber(),$scope.data=GameData.getData(),initializeMainTable($scope.players.length,!1),$scope.$apply(),$("#modalScoreboard").on("shown.bs.modal",function(){$("#modalScoreboard #scoreboardDetails th").css({width:100/$scope.players.length+"%"}),$("#modalScoreboard #scoreboardDetails td").css({width:100/$scope.players.length+"%"})})}),$scope.$on("updateGameBoard",function(){$scope.players=GameData.getPlayers(),$scope.activePlayer=GameData.getActivePlayer(),$scope.data=GameData.getData(),GameData.gameHasWinner()||$scope.tutorial||writeGameDataToLocalStorage($scope.players,$scope.data)}),$scope.$on("restoreGameBoard",function(){var a=[],b={};return localStorage.getItem("players")&&localStorage.getItem("data")?(a=JSON.parse(localStorage.getItem("players")),b=JSON.parse(localStorage.getItem("data")),GameData.setPlayers(a),GameData.setData(b),$scope.players=GameData.getPlayers(),$scope.data=GameData.getData(),$scope.activePlayer=GameData.getActivePlayer(),initializeMainTable($scope.players.length,!1),$scope.$apply(),void $("#modalScoreboard").on("shown.bs.modal",function(){$("#modalScoreboard #scoreboardDetails th").css({width:100/$scope.players.length+"%"}),$("#modalScoreboard #scoreboardDetails td").css({width:100/$scope.players.length+"%"})})):void $rootScope.$broadcast("initializeAddPlayers")}),$scope.$on("initializeTutorial",function(event){$scope.language=GameData.getLanguage(),setTextTutorial($scope.language),$scope.tutorialData={step:1},$scope.stepText=eval("tutorial."+$scope.language+".steps.one"),GameData.setPlayers(getTutorialPlayers($scope.language)),GameData.resetData(),GameData.setTutorial(!0),$scope.players=GameData.getPlayers(),$scope.players[0].myTurn=!0,$scope.activePlayer=$scope.players[0],$scope.data=GameData.getData(),initializeMainTable($scope.players.length,!0),$scope.tutorial=GameData.isTutorial(),$scope.$apply(),$("#modalScoreboard").on("shown.bs.modal",function(){$("#modalScoreboard #scoreboardDetails th").css({width:100/$scope.players.length+"%"}),$("#modalScoreboard #scoreboardDetails td").css({width:100/$scope.players.length+"%"})}),$("#modalTutorialIntro").modal("show")})}]);