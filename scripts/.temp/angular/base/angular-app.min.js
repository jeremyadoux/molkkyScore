var app=angular.module("angular-app",[]);app.factory("GameData",function(){var a=["disqualified","zero","half"],b=[],c={throwNumber:1,confirmType:"",tutorial:!1,tutorialStepFive:!1,bosklappersMode:!1},d={maxPoints:50,misses:a[0]},e="En";return{getSettings:function(){return d},setMaxPointsSetting:function(){d.maxPoints=maxPoints},setMissesSetting:function(a){d.misses=a},getLanguage:function(){return e},setLanguage:function(a){e=a},emptyPlayersArray:function(){b=[]},setConfirmType:function(a){c.confirmType=a},getConfirmType:function(){return c.confirmType},resetConfirmType:function(){c.confirmType=""},isTutorial:function(){return c.tutorial},setTutorial:function(a){c.tutorial=a},isTutorialStepFive:function(){return c.tutorialStepFive},setTutorialStepFive:function(a){c.tutorialStepFive=a},resetPlayers:function(){var a=0;$.each(b,function(){this.index=a,a++,this.outOfTheGame=!1,this.winner=!1,this.ranking=999,this.score=0,this.scoreHistory=[],this.misses=0,this.myTurn=!1,this.disqualified=!1})},resetPlayerIndexes:function(){var a=0;$.each(b,function(){this.index=a,a++})},getPlayers:function(){return b},setPlayers:function(a){b=a},getData:function(){return c},setData:function(a){c=a},resetData:function(){c={throwNumber:1,confirmType:"",isTutorial:!1,tutorialStepFive:!1,bosklappersMode:!1}},resetThrowNumber:function(){c.throwNumber=1},getActivePlayer:function(){var a;return $.each(b,function(){return this.myTurn?(a=this,!1):void 0}),a},getNextInGamePlayer:function(a){var c;return c=a==b.length-1?b[0]:b[a+1],c.outOfTheGame?this.getNextInGamePlayer(c.index):c},getFirstInGamePlayer:function(){for(var a,c=0;c<b.length;c++)if(!b[c].outOfTheGame){a=b[c];break}return a},undoLastThrow:function(){for(var a=this.getActivePlayer().index,b=this.getPreviousPlayer(a);b.scoreHistory.length<=c.throwNumber-1;){if(a<=b.index&&b.scoreHistory.length==c.throwNumber-1){c.throwNumber--;break}b=this.getPreviousPlayer(b.index)}b.scoreHistory.pop(),b.score=0==b.scoreHistory.length?0:b.scoreHistory[b.scoreHistory.length-1],b.score==b.scoreHistory[b.scoreHistory.length-2]?(b.misses=1,b.score==b.scoreHistory[b.scoreHistory.length-3]&&(b.misses=2)):b.misses=0,this.getActivePlayer().myTurn=!1,b.myTurn=!0,b.outOfTheGame=!1,b.winner=!1,b.ranking=999,b.disqualified=!1},getPreviousPlayer:function(a){var c;return c=0==a?b[b.length-1]:b[a-1]},setRanking:function(a){this.gameHasWinner()?a.ranking=this.getLowestRanking()+1:(a.winner=!0,a.ranking=1)},getLowestRanking:function(){var a=-1;return $.each(b,function(){999!==this.ranking&&this.ranking>a&&(a=this.ranking)}),-1==a&&(a=999),a},stillPlayersInTheGame:function(){var a=!1;return $.each(b,function(){return this.outOfTheGame?void 0:(a=!0,!1)}),a},gameHasWinner:function(){var a=!1;return $.each(b,function(){return this.winner?(a=!0,!1):void 0}),a},gameHasStarted:function(){return b[0].scoreHistory.length>0},addPlayerToGame:function(a){b.push(new Player(b.length,a))},setBosklappersMode:function(a){c.bosklappersMode=a},getBosklappersMode:function(){return c.bosklappersMode}}}),app.filter("rangeFirstRow",function(){return function(a){if(a){var b=[],c=-1;c=a&&a.length<=4?a.length:a.length>6?4:3;for(var d=0;c>d;d++)b.push(a[d]);return b}}}),app.filter("rangeSecondRow",function(){return function(a){if(a){var b=[],c=-1;c=5==a.length||6==a.length?3:4;for(var d=c;d<a.length;d++)b.push(a[d]);return b}}});