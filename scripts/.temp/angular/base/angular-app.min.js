var app=angular.module("angular-app",[]);app.factory("GameData",function(){var a=[],b={throwNumber:1,confirmType:"",tutorial:!1,tutorialStepFive:!1,bosklappersMode:!1},c={maxPoints:50,misses:"Disqualified",exceedMax:"HalfMax"},d="En";return{getSettings:function(){return c},setSettings:function(a){c=a},setMaxPointsSetting:function(a){c.maxPoints=a},setMissesSetting:function(a){c.misses=a},getLanguage:function(){return d},setLanguage:function(a){d=a},emptyPlayersArray:function(){a=[]},setConfirmType:function(a){b.confirmType=a},getConfirmType:function(){return b.confirmType},resetConfirmType:function(){b.confirmType=""},isTutorial:function(){return b.tutorial},setTutorial:function(a){b.tutorial=a},isTutorialStepFive:function(){return b.tutorialStepFive},setTutorialStepFive:function(a){b.tutorialStepFive=a},resetPlayers:function(){var b=0;$.each(a,function(){this.index=b,b++,this.outOfTheGame=!1,this.winner=!1,this.ranking=999,this.score=0,this.scoreHistory=[],this.misses=0,this.myTurn=!1,this.disqualified=!1})},resetPlayerIndexes:function(){var b=0;$.each(a,function(){this.index=b,b++})},getPlayers:function(){return a},setPlayers:function(b){a=b},getData:function(){return b},setData:function(a){b=a},resetData:function(){b={throwNumber:1,confirmType:"",isTutorial:!1,tutorialStepFive:!1,bosklappersMode:!1}},resetThrowNumber:function(){b.throwNumber=1},getActivePlayer:function(){var b;return $.each(a,function(){return this.myTurn?(b=this,!1):void 0}),b},getNextInGamePlayer:function(b){var c;return c=b==a.length-1?a[0]:a[b+1],c.outOfTheGame?this.getNextInGamePlayer(c.index):c},getFirstInGamePlayer:function(){for(var b,c=0;c<a.length;c++)if(!a[c].outOfTheGame){b=a[c];break}return b},undoLastThrow:function(){for(var a=this.getActivePlayer().index,c=this.getPreviousPlayer(a);c.scoreHistory.length<=b.throwNumber-1;){if(a<=c.index&&c.scoreHistory.length==b.throwNumber-1){b.throwNumber--;break}c=this.getPreviousPlayer(c.index)}c.scoreHistory.pop(),c.score=0==c.scoreHistory.length?0:c.scoreHistory[c.scoreHistory.length-1],c.score==c.scoreHistory[c.scoreHistory.length-2]?(c.misses=1,c.score==c.scoreHistory[c.scoreHistory.length-3]&&(c.misses=2)):c.misses=0,this.getActivePlayer().myTurn=!1,c.myTurn=!0,c.outOfTheGame=!1,c.winner=!1,c.ranking=999,c.disqualified=!1},getPreviousPlayer:function(b){var c;return c=0==b?a[a.length-1]:a[b-1]},setRanking:function(a){this.gameHasWinner()?a.ranking=this.getLowestRanking()+1:(a.winner=!0,a.ranking=1)},getLowestRanking:function(){var b=-1;return $.each(a,function(){999!==this.ranking&&this.ranking>b&&(b=this.ranking)}),-1==b&&(b=999),b},stillPlayersInTheGame:function(){var b=!1;return $.each(a,function(){return this.outOfTheGame?void 0:(b=!0,!1)}),b},numberOfPlayersInTheGame:function(){var b=0;return $.each(a,function(){this.outOfTheGame||b++}),b},gameHasWinner:function(){var b=!1;return $.each(a,function(){return this.winner?(b=!0,!1):void 0}),b},gameHasStarted:function(){return a[0].scoreHistory.length>0},addPlayerToGame:function(b){a.push(new Player(a.length,b))},setBosklappersMode:function(a){b.bosklappersMode=a},getBosklappersMode:function(){return b.bosklappersMode}}}),app.filter("rangeFirstRow",function(){return function(a){if(a){var b=[],c=-1;c=a&&a.length<=4?a.length:a.length>6?4:3;for(var d=0;c>d;d++)b.push(a[d]);return b}}}),app.filter("rangeSecondRow",function(){return function(a){if(a){var b=[],c=-1;c=5==a.length||6==a.length?3:4;for(var d=c;d<a.length;d++)b.push(a[d]);return b}}});