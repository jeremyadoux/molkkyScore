function validatePlayerName(newPlayerName,players,alertElement,language){if(""==$.trim(newPlayerName))return warn(alertElement,eval("warnings.playerName."+language+".empty")),!1;var isValid=!0;return $.each(players,function(){return this.name.toLowerCase().trim()==newPlayerName.toLowerCase().trim()?(warn(alertElement,eval("warnings.playerName."+language+".unique")),isValid=!1,!1):void 0}),isValid&&alertElement.hide(),isValid}function warn(a,b){a.text(b),a.show()}function infoMessage(a,b){a.text(b),a.removeClass("alert-info").addClass("alert-info"),a.fadeIn("slow").fadeOut("slow",function(){a.removeClass("alert-info")})}function Player(a,b){this.index=a,this.name=b,this.outOfTheGame=!1,this.winner=!1,this.ranking=999,this.wins=0,this.score=0,this.scoreHistory=[],this.misses=0,this.myTurn=!1,this.disqualified=!1}function getTutorialPlayers(a){var b={},c={};return"En"==a?(b=new Player(0,"Bob"),c=new Player(1,"Sara")):"Fr"==a&&(b=new Player(0,"Hugo"),c=new Player(1,"Emma")),[b,c]}function processScore(a,b,c,d){a.misses=0,a.score+b<c?a.score+=b:a.score+b>c?a.score="Zero"==d?0:Math.floor("HalfMax"==d?c/2:(a.score+b)/2):(a.score=c,a.outOfTheGame=!0),a.scoreHistory.push(a.score)}function processMiss(a,b){a.misses++,a.misses>2&&("Disqualified"==b?(a.disqualified=!0,a.outOfTheGame=!0,a.score="X"):a.score="Half"==b?Math.floor(a.score/2):0),a.scoreHistory.push(a.score)}function comparePlayerScores(a,b){var c=a.disqualified?a.scoreHistory[a.scoreHistory.length-2]:a.score,d=b.disqualified?b.scoreHistory[b.scoreHistory.length-2]:b.score;return c>d?-1:c===d?50!==c?0:comparePlayerRankings(a,b):1}function comparePlayerRankings(a,b){return a.ranking>b.ranking?1:a.ranking===b.ranking?0:-1}function hasNetwork(){var a=new XMLHttpRequest,b="http://molkkyscore.com/index.html",c=Math.round(1e4*Math.random());a.open("HEAD",b+"?rand="+c,!1);try{return a.send(),a.status>=200&&a.status<304?!0:!1}catch(d){return!1}}function initializeMainTable(a,b){$("#mainTable #td-player-name").removeClass("active"),$("#mainTable .td-score-number.active").removeClass("active"),$("#mainTable #td-0.billyHalf").removeClass("billyHalf"),$("#mainTable #td-0.billySuper").removeClass("billySuper"),$("#mainTable #td-0").text("0"),$("#mainTable").fadeIn(1e3,function(){b&&(setInitialColspanTutorial(),setTutorialArrowsPosition(!1)),$("#mainTable #scoreTable td").css(4>=a?{width:100/a+"%"}:{width:100/Math.ceil(a/2)+"%"})})}function initializeAddPlayersModal(){if($("#modalAddPlayers .alert").hide(),$("#modalAddPlayers").modal({keyboard:!1,backdrop:"static"},"show"),$("#modalAddPlayers input").val(""),$("#modalAddPlayers input").focus(),window.localStorage){var a=localStorage.getItem("playerNames");a?a=JSON.parse(a):(a=[],localStorage.setItem("playerNames",JSON.stringify(a))),$("#modalAddPlayers input").typeahead().data("typeahead").source=a}}function initializeSettingsGameModal(){$("#modalSettingsGame").modal({keyboard:!1,backdrop:"static"},"show")}function initializeScoreboardModalEndedGame(){$("#modalScoreboard .modal-header .close").hide(),$("#modalScoreboard .modal-footer .btn-primary").hide(),$("#modalScoreboard .modal-footer .btn-default").removeClass("pull-left"),$("#modalScoreboard").modal({keyboard:!1,backdrop:"static"},"show")}function initializeScoreboardModalContinuableGame(){$("#modalScoreboard .modal-header .close").show(),$("#modalScoreboard .modal-footer .btn-primary").show(),$("#modalScoreboard .modal-footer .btn-default").addClass("pull-left"),$("#modalScoreboard").modal({keyboard:!1,backdrop:"static"},"show")}function toggleNumberActivation(a){var b="#td-"+a;$(b).hasClass("active")?($(b).removeClass("active"),$("#mainTable #td-player-name").removeClass("active")):($("#mainTable .td-score-number.active").removeClass("active"),$(b).addClass("active"),$("#mainTable #td-player-name").addClass("active"))}function addNewPlayerNamesToLocalStorage(a){if(window.localStorage){var b=JSON.parse(localStorage.getItem("playerNames"));$.each(a,function(){var a=this.name;b.contains(a)||b.push(this.name)}),localStorage.setItem("playerNames",JSON.stringify(b))}}function showModal(a){$(a).modal({keyboard:!1,backdrop:"static"},"show")}function showModalWithLoader(a,b){$("loading-title").text(b),$(".loader-container").show(),setTimeout(function(){$(".loader-container").hide(),showModal(a)},loadingTime)}function animateOptionsIcon(){$("#td-options img").addClass("animate-spin"),setTimeout(function(){$("#td-options img").removeClass("animate-spin")},2500)}function isRestoreGame(){return window.localStorage?localStorage.getItem("restoreGame")?restoreGame=JSON.parse(localStorage.getItem("restoreGame")):(localStorage.setItem("restoreGame",JSON.stringify(!1)),!1):!1}function setIsRestoreGame(a){window.localStorage&&(localStorage.setItem("restoreGame",JSON.stringify(a)),a||(localStorage.removeItem("players"),localStorage.removeItem("data")))}function writeGameDataToLocalStorage(a,b){window.localStorage&&(localStorage.setItem("players",JSON.stringify(a)),localStorage.setItem("data",JSON.stringify(b)),setIsRestoreGame(!0))}function checkBosklappersActivationCount(a){return a?bosklappersActivationCount=0:bosklappersActivationCount++,3>bosklappersActivationCount?!1:!0}function setBillyChar(){"0"==$("#td-0").text()?$("#td-0").hasClass("active")?($("#td-0").text("/2"),$("#td-0").removeClass("active").addClass("billyHalf")):toggleNumberActivation(0):"/2"==$("#td-0").text()?($("#td-0").text("0!"),$("#td-0").removeClass("billyHalf").addClass("billySuper"),$("#mainTable .td-score-number.active").removeClass("active")):($("#td-0").text("0"),$("#td-0").removeClass("billySuper"),$("#td-player-name").removeClass("active"))}function toggleNumberActivationBosklappers(a){if("0!"!=$("#td-0").text()){var b="#td-"+a;$(b).hasClass("active")?($(b).removeClass("active"),"/2"!=$("#td-0").text()&&$("#mainTable #td-player-name").removeClass("active")):($("#mainTable .td-score-number.active").removeClass("active"),$(b).addClass("active"),$("#mainTable #td-player-name").hasClass("active")||$("#mainTable #td-player-name").addClass("active"))}}function processScoreBosklappers(a,b,c){a.misses=0,$("#td-0").hasClass("billyHalf")?a.score=Math.floor(-1==b?a.score/2:(a.score+b)/2):$("#td-0").hasClass("billySuper")?a.score=0:a.score+b<c?a.score+=b:a.score+b>c?a.score=Math.floor((a.score+b)/2):(a.score=c,a.outOfTheGame=!0),a.scoreHistory.push(a.score)}function processMissBosklappers(a){a.misses++,a.misses>2&&(a.score=Math.floor(a.score/2),a.misses=0),a.scoreHistory.push(a.score)}var loadingTime=2e3,hasNetwork=hasNetwork();Array.prototype.contains=function(a){for(var b=0;b<this.length;b++)if(this[b].toLowerCase()==a.toLowerCase())return!0;return!1};var bosklappersActivationCount=0;